<!DOCTYPE html>
<html lang="en" class="loading">

<head>
	<title>Amstramgram Media Player - Documentation - Events</title>
	<include src="head.html"></include>
</head>
<body>
	<include src="header.html"></include>
	<div class="content-wrapper api">
		<div class="content">
<!-- 
	**** INTRODUCTION ****
-->
      <h2 id="intro" class="padding-top140">Introduction</h2>
			<div class="text">
				<p>
          <em>AmstramgramAudioPlayer</em> and <em>AmstramgramMediaPlayer</em> classes both extends a small utility <em>EventEmitter</em> class.<br>
          So they can emit events and listen to them.<br>
          Listening to an event is set through the <a href="instance_api.html#on">on</a> method.<br>
          The <a href="instance_api.html#off">off</a> method stops the listening.
				</p>
				<pre class="default"><code class="javascript">
//Listening to the mouse click event on the playPause button.
myPlayer.on('amst__playPause-click', function onPlayPauseClick() {
  //this = myPlayer
  console.log(this, 'playPause button has been clicked')
  //Stop listening.
  this.off('amst__playPause-click', onPlayPauseClick)
})

</code></pre>
				<p class="text">
					You can check all the events generated by the video player of the <a href="http://127.0.0.1:5500/docs/playlists.html#video">PLAYLIST</a> demo in your browser console.
				</p>

			</div>
<!-- 
	**** BUTTONS ****
-->
      <h2 id="buttons" class="padding-top140">buttons</h2>
      <div class="text">
        <p>
          The player instance emits an event for each button click.<br>
          The event name is of the form&nbsp;: <em class="orange">amst__&lt;buttonName&gt;-click</em>.<br>
          Thus, for the <em>mute</em> button, it will be&nbsp;: <em class="orange">amst__mute-click</em>.<br>
					The event transmits the button instance and the original event.
        </p>
				<pre class="default" ><code class="javascript">
//Listening to the mouse click event on the playPause and the mute buttons.
myPlayer.on('amst__playPause-click amst__mute-click', (button, event) => {
	//Will output "The playPause button has been clicked" 
	//when click occurs on playPause button
	//and "The mute button has been clicked"
	//when click occurs on mute button
  console.log("The " + button.name + " button has been clicked")
	//Will output the button properties
	console.log(button.params)
	//Will output the original event
	console.log(event)
})

</code></pre>
        <p class="padding-top20">
          Likewise, an event is emitted whenever a button has been updated.<br>
          And the event name is on the form&nbsp;: <em class="orange">amst__&lt;buttonName&gt;-update</em>.<br>
          Thus, for the <em>mute</em> button, it will be&nbsp;: <em class="orange">amst__mute-update</em>.<br>
					The event transmits the button instance.
        </p>
      </div>
<!-- 
	**** FULLSCREEN-ENTER ****
-->
			<h2 id="error" class="padding-top140">error</h2>
			<p class="text">
				<em>amst__error</em><br>
				Emit when media src can't be found.
			</p>
<!-- 
	**** FULLSCREEN-ENTER ****
-->
			<h2 id="fullscreen-enter" class="padding-top140">fullscreen-enter</h2>
			<p class="text">
				<em>amst__fullscreen-enter</em><br>
				Emit after video player enters fullscreen.
			</p>
<!-- 
	**** FULLSCREEN-EXIT ****
-->
			<h2 id="fullscreen-exit" class="padding-top140">fullscreen-exit</h2>
			<p class="text">
				<em>amst__fullscreen-exit</em><br>
				Emit after video player exits fullscreen.
			</p>
<!-- 
	**** PLAYBACKRATE ****
-->
			<h2 id="playbackRate-change" class="padding-top140">playbackRate-change</h2>
			<p class="text">
				<em>amst__playbackRate-change</em><br>
				Emit after the source playbackRate has been changed.<br>
				Transmits the old and the new values.
			</p>
<pre class="default" ><code class="javascript">
//Listening to the amst__playbackRate-change.
myPlayer.on('amst__playbackRate-change', (oldValue, newValue) => {
	console.log("Playback rate has changed from " + oldValue + " to " + newValue)
})
	
</code></pre>
			<p class="text">
				Check it in your browser console with <a href="http://127.0.0.1:5500/docs/playlists.html#video">the video playlist demo</a>.
			</p>
<!-- 
	**** QUALITY ****
-->
			<h2 id="quality-change" class="padding-top140">quality-change</h2>
			<p class="text">
				<em>amst__quality-change</em><br>
				Emit after the source quality has been changed.<br>
				Transmits the old and the new values.
			</p>
<pre class="default" ><code class="javascript">
//Listening to the amst__quality-change event.
myPlayer.on('amst__quality-change', (oldValue, newValue) => {
	console.log("Quality has changed from " + oldValue + " to " + newValue)
})
	
</code></pre>
<!-- 
	**** PAUSE ****
-->
			<h2 id="pause" class="padding-top140">pause</h2>
			<p class="text">
				<em>amst__pause</em><br>
				Emit after player pauses.
			</p>
<!-- 
	**** PLAY ****
-->
			<h2 id="play" class="padding-top140">play</h2>
			<p class="text">
				<em>amst__play</em><br>
				Emit after player plays.
			</p>
<!-- 
	**** RESET ****
-->
			<h2 id="reset" class="padding-top140">reset</h2>
			<p class="text">
				<em>amst__reset</em><br>
				Emit after player reset.
			</p>
			<p class="text">
				Most of mobile browsers don't like to load multiple media elements.<br>
				The <em>reset</em> method is called on the last player used when another player starts.<br>
				When a player is reset&nbsp;: <br>
				- its src is set to undefined;<br>
				- its preload attribute to 'none';<br>
				- its autoplay attribute to false;<br>
				- its src and currentTime are then restored.
			</p>
<!-- 
	**** RESIZE ****
-->
			<h2 id="resize" class="padding-top140">resize</h2>
			<p class="text">
				<em>amst__resize</em><br>
				Emit after player resizes.
			</p>
			<p class="text">
				The class watches the window resize and scroll events through a requestAnimationFrame and dispatches a throttled <em>amst__optimizedScrollResize</em> event that players listen to. This listener is also triggered by the <em>amst__should-resize</em> event internally dispatched by the UI elements when they are updated.
			</p>
<!-- 
	**** SETTINGS ****
-->
			<h2 id="settings-change" class="padding-top140">settings-change</h2>
			<p class="text">
				<em>amst__settings-change</em><br>
				Emit after the player settings has been changed.<br>
				Transmits the name (<i>playbackRate</i>, <i>quality</i> or <i>subs</i>) of the changed setting and its old and new values.
			</p>
<pre class="default" ><code class="javascript">
//Listening to the amst__settings-change event.
myPlayer.on('amst__settings-change', (settingName, oldValue, newValue) => {
	console.log(settingName + " has changed from " + oldValue + " to " + newValue)
})

</code></pre>
<!-- 
	**** SRC-CHANGE ****
-->
			<h2 id="src-change" class="padding-top140 get">src-change</h2>
			<p>
				<em>amst__src-change</em><br>
				Emit when player source changes.
			</p>
<!-- 
	**** SUBS ****
-->
			<h2 id="subs-change" class="padding-top140">subs-change</h2>
			<div class="end text">
				<p>
					<em>amst__subs-change</em><br>
					Emit after the subtitles language has been changed.<br>
					Transmits the old and the new values.
				</p>
<pre class="default" ><code class="javascript">
//Listening to the amst__subs-change event.
myPlayer.on('amst__subs-change', (oldValue, newValue) => {
	console.log("Subtitles language has changed from " + oldValue + " to " + newValue)
})

</code></pre>
			</div>

		</div>
	</div>
	<div class="up"></div>
	<link rel="stylesheet" href="css/events.css">
	<script src="js/events.js"></script>
</body>
</html>